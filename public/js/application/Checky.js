function Checky(b){this.feed_selection=b.feed_selection;this.check_feed_id=b.check_feed_id;this.category_feed_id=b.category_feed_id;this.click_all=b.click_all;this.checky_bar=b.checky_bar;this.count=0}Checky.prototype.init=function(){var b=this;$(document).delegate(b.feed_selection,"change",function(q){var t=$(this).val();var x=$(b.check_feed_id);var A=$(b.category_feed_id);var s=x.is(":checked");var a=$(location).attr("href");var e=$(this).attr("base-url");var y=$(".checky-bar");var u=new Array();if(s&&t!="none"){var r,v,B;if(t=="restore"||t=="inbox"){r=confirm("Are you sure you want to restore these feedbacks?");v="#fef1b5";B="inbox/all"}if(t=="remove"){r=confirm("Are you sure you want to permanently remove these feedbacks?");v="#fef1b5"}if(t=="publish"){r=confirm("Are you sure want to publish these feedbacks?");v="#66cd00";B="inbox/published/all"}if(t=="feature"){r=confirm("Are you sure want to feature these feedbacks?");v="#fbec5d";B="inbox/featured/all"}if(t=="delete"){r=confirm("Are you sure want to delete these feedbacks?");v="#fef1b5";B="inbox/deleted"}if(r){x.each(function(){if($(this).is(":checked")){if($("#"+$(this).val()).is(":hidden")==false){u.push({feedid:$(this).val(),contactid:$(this).siblings(".contact-feed-id").val(),siteid:$(this).siblings(".site-feed-id").val(),rating:$(this).siblings(".feed-ratings").val()});$("#"+$(this).val()).fadeOut(300,function(){$(this).hide()})}}});var z=u.length;$("option:first",this).prop("selected",true);var w=" <a href='#' class='hide-checkybar'>Close</a>";$.ajax({type:"POST",data:{col:t,feed_ids:u,cat_id:A.val(),curl:a},url:$(this).attr("hrefaction"),dataType:"json",beforeSend:function(){y.html("processing feedback...").css({background:"#fef1b5"}).show()},success:function(c){var d=c.return_ids;var f=c.message;y.css({width:"350px",right:"22%"});y.hide();return_feedback(d,y,t,w,f);if(d==null){y.css({background:v,width:"200px",right:"28%"}).html(notification_message(t,z,d,w)).show()}close_checkybar()}})}$(this).val("none");$(".click-all").attr("checked",false);x.attr("checked",false)}else{$(".click-all").attr("checked",false)}})};Checky.prototype.clickAll=function(){var b=this;$(document).delegate(b.click_all,"click",function(a){if(this.checked){$(b.check_feed_id).prop("checked",true);$(b.click_all).prop("checked",true)}else{$(b.check_feed_id).prop("checked",false);$(b.click_all).prop("checked",false)}})};function notification_message(g,f,h,e){return"<div>"+g+": "+(f-((h!=null)?h.length:0))+(f>1?" feedbacks":" feedback")+e+"</div>"}function return_feedback(h,g,i,j,f){if(h!=null){g.html("<div>"+f+j+"</div>").show();$(h).each(function(b,a){$("div#"+a.feedid+".feedback").fadeIn(300,function(){$(this).show()})})}}function close_checkybar(){$(".hide-checkybar").bind("click",function(b){$(this).parents(".checky-bar").hide();b.preventDefault()})};