function InboxStateObject(){this.baseUrl=$("input[name='baseUrl']").val()}InboxStateObject.prototype.undo=function(){var b=this;$(document).delegate("a.undo","click",function(j){var n=$(this).attr("href");var m=$(this).attr("hrefaction");var a=$(this).attr("undo-type");var l=$(".inbox-state").val();var e=b.elem.attr("catid");var k=350;$("#"+b.feeds.feedid).fadeIn(k);$(this).parents("."+a).fadeOut(k,function(){$(this).remove()});$.ajax({type:"POST",url:m,data:{mode:l,feed_ids:[b.feeds],cat_id:e,catstate:true}});j.preventDefault()})};InboxStateObject.prototype.process=function(){var d=this;var c=$(d).attr("feedid");if(c){$(d.elem).parents(".feedback").fadeOut(350,function(){var i="  <a class='undo' hrefaction='"+d.href+"' href='#' undo-type='"+d.identifier+"'>Undo</a>";var b="  <a class='close-checky' href='#'>Close</a>";var j=d.message+i+b;var h=$("<div/>").addClass(d.identifier).html(j);var a=$(".checky-bar");if(d.state==0){$.ajax({type:"POST",url:d.href,data:{mode:d.mode,feed_ids:[d.feeds],cat_id:d.catid,catstate:d.catstate},success:function(){a.html(h).show()}})}else{$.ajax({type:"POST",url:d.href,data:{mode:"inbox",feed_ids:[d.feeds],cat_id:d.catid},success:function(){a.html("<div class='"+d.identifier+"'>Feedback has been sent to the <a href='"+d.baseUrl+"inbox/all'>Inbox</a> "+i+b+"</div>").show()}})}})}$(document).delegate("a.close-checky","click",function(a){$(this).parents(".check").remove();a.preventDefault()})};function CheckStateObject(b){InboxStateObject.apply(this,arguments);this.elem=b;this.message="Feedback has been published and moved to <a href='"+this.baseUrl+"inbox/published/all'>Published Folder</a>";this.mode="publish";this.feedid=$(b).attr("feedid");this.href=$(b).attr("hrefaction");this.catid=$(b).attr("catid");this.catstate=$(b).attr("cat-state");this.state=$(b).attr("state");this.feeds={feedid:this.feedid};this.identifier=$(b).attr("class")}CheckStateObject.prototype=new InboxStateObject();function FeatureStateObject(b){InboxStateObject.apply(this,arguments);this.elem=b;this.message="Feedback has been published and moved to <a href='"+this.baseUrl+"inbox/featured/all'>Featured Folder</a>";this.mode="feature";this.feedid=$(b).attr("feedid");this.href=$(b).attr("hrefaction");this.catid=$(b).attr("catid");this.catstate=$(b).attr("cat-state");this.state=$(b).attr("state");this.feeds={feedid:this.feedid};this.identifier=$(b).attr("class")}FeatureStateObject.prototype=new InboxStateObject();function RemoveStateObject(b){InboxStateObject.apply(this,arguments);this.elem=b;this.message="Feedback has been <a href='"+this.baseUrl+"inbox/deleted'>deleted</a>";this.mode="delete";this.feedid=$(b).attr("feedid");this.href=$(b).attr("hrefaction");this.catid=$(b).attr("catid");this.catstate=$(b).attr("cat-state");this.state=$(b).attr("state");this.feeds={feedid:this.feedid};this.identifier=$(b).attr("class")}RemoveStateObject.prototype=new InboxStateObject();function CatPickObject(b){InboxStateObject.apply(this,arguments);this.elem=b;this.catstate=$(b).attr("cat-state");if(this.catstate=="default"){this.message="Feedback has been sent to <a href='"+this.baseUrl+"inbox/all'>Inbox</a>"}else{this.message="Feedback has been sent to <a href='"+this.baseUrl+"inbox/filed/all'>Filed Feedback</a>"}this.mode="fileas";$(b).parents("div.category-picker-holder").hide();this.feedid=$(b).attr("feedid");this.href=$(b).attr("hrefaction");this.catid=$(b).attr("catid");this.catstate=$(b).attr("cat-state");this.state=$(b).attr("state");this.feeds={feedid:this.feedid};this.identifier=$(b).attr("class")}CatPickObject.prototype=new InboxStateObject();CatPickObject.prototype.process=function(){var b=this;if(location.pathname.match(/filed|modifyfeedback/)){$.ajax({type:"POST",url:b.href,data:{mode:b.mode,feed_ids:[b.feeds],cat_id:b.catid,catstate:b.catstate},success:function(){if(b.catstate=="default"){$(b.elem).parents(".feedback").fadeOut(350)}var a=new Status();a.notify("Processing...",1000)}})}else{$(this.elem).parents(".feedback").fadeOut(350,function(){var j=" <a class='undo' hrefaction='"+b.href+"' href='#' undo-type='"+b.identifier+"'>Undo</a>";var h="  <a class='close-checky' href='#'>Close</a>";var a=b.message+j+h;var i=$("<div/>").addClass(b.identifier).html(a);var g=$(".checky-bar");if(b.state==0){$.ajax({type:"POST",url:b.href,data:{mode:b.mode,feed_ids:[b.feeds],cat_id:b.catid,catstate:b.catstate},success:function(){var c=new Status();c.notify("Processing...",1000);g.html(i).show()}})}else{$.ajax({type:"POST",url:b.href,data:{mode:"inbox",feed_ids:[b.feeds],cat_id:b.catid},success:function(){var c=new Status();c.notify("Processing...",1000);g.html("<div class='"+b.identifier+"'>Feedback has been sent to the <a href='"+b.baseUrl+"inbox/all'>Inbox</a> "+j+h+"</div>").show()}})}})}$(document).delegate("a.close-checky","click",function(a){$(this).parents(".check").remove();a.preventDefault()})};function InboxStatusChange(b){this.inbox_controls=b}InboxStatusChange.prototype.initialize=function(){var b=this;$(document).delegate(b.inbox_controls,"click",function(e){var k=$(this).attr("class");var i=$(this);var k=$(this).attr("class");var i=$(this);if(k=="check"){var l=new CheckStateObject(i);l.process();l.undo()}if(k=="feature"){var j=new FeatureStateObject(i);j.process();j.undo()}if(k=="remove"||k=="popup-delete"){var a=new RemoveStateObject(i);a.process();a.undo()}})};