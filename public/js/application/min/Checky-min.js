function Checky(a){this.feed_selection=a.feed_selection;this.check_feed_id=a.check_feed_id;this.category_feed_id=a.category_feed_id;this.click_all=a.click_all;this.checky_bar=a.checky_bar;this.count=0}Checky.prototype.init=function(){var a=this;$(document).delegate(a.feed_selection,"change",function(c){var o=$(this).val();var k=$(a.check_feed_id);var f=$(a.category_feed_id);var p=k.is(":checked");var j=$(location).attr("href");var g=$(this).attr("base-url");var i=$(".checky-bar");var n=new Array();if(p&&o!="none"){var b,m,d;if(o=="restore"||o=="inbox"){b=confirm("Are you sure you want to restore these feedbacks?");m="#fef1b5";d="inbox/all"}if(o=="remove"){b=confirm("Are you sure you want to permanently remove these feedbacks?");m="#fef1b5"}if(o=="publish"){b=confirm("Are you sure want to publish these feedbacks?");m="#66cd00";d="inbox/published/all"}if(o=="feature"){b=confirm("Are you sure want to feature these feedbacks?");m="#fbec5d";d="inbox/featured/all"}if(o=="delete"){b=confirm("Are you sure want to delete these feedbacks?");m="#fef1b5";d="inbox/deleted"}if(b){k.each(function(){if($(this).is(":checked")){if($("#"+$(this).val()).is(":hidden")==false){n.push({feedid:$(this).val(),contactid:$(this).siblings(".contact-feed-id").val(),siteid:$(this).siblings(".site-feed-id").val(),rating:$(this).siblings(".feed-ratings").val()});$("#"+$(this).val()).fadeOut(300,function(){$(this).hide()})}}});var h=n.length;$("option:first",this).prop("selected",true);var l=" <a href='#' class='hide-checkybar'>Close</a>";$.ajax({type:"POST",data:{col:o,feed_ids:n,cat_id:f.val(),curl:j},url:$(this).attr("hrefaction"),dataType:"json",beforeSend:function(){i.html("processing feedback...").css({background:"#fef1b5"}).show()},success:function(r){var q=r.return_ids;var e=r.message;i.css({width:"350px",right:"22%"});i.hide();return_feedback(q,i,o,l,e);if(q==null){i.css({background:m,width:"200px",right:"28%"}).html(notification_message(o,h,q,l)).show()}close_checkybar()}})}$(this).val("none");$(".click-all").attr("checked",false);k.attr("checked",false)}else{$(".click-all").attr("checked",false)}})};Checky.prototype.clickAll=function(){var a=this;$(document).delegate(a.click_all,"click",function(b){if(this.checked){$(a.check_feed_id).prop("checked",true);$(a.click_all).prop("checked",true)}else{$(a.check_feed_id).prop("checked",false);$(a.click_all).prop("checked",false)}})};function notification_message(b,c,a,d){return"<div>"+b+": "+(c-((a!=null)?a.length:0))+(c>1?" feedbacks":" feedback")+d+"</div>"}function return_feedback(c,d,b,a,e){if(c!=null){d.html("<div>"+e+a+"</div>").show();$(c).each(function(f,g){$("div#"+g.feedid+".feedback").fadeIn(300,function(){$(this).show()})})}}function close_checkybar(){$(".hide-checkybar").bind("click",function(a){$(this).parents(".checky-bar").hide();a.preventDefault()})};