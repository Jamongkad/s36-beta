function InboxStateObject(){this.baseUrl=$("input[name='baseUrl']").val()}InboxStateObject.prototype.undo=function(){var a=this;$(document).delegate("a.undo","click",function(g){var i=$(this).attr("href");var b=$(this).attr("hrefaction");var d=$(this).attr("undo-type");var c=$(".inbox-state").val();var h=a.elem.attr("catid");var f=350;$("#"+a.feeds.feedid).fadeIn(f);$(this).parents("."+d).fadeOut(f,function(){$(this).remove()});$.ajax({type:"POST",url:b,data:{mode:c,feed_ids:[a.feeds],cat_id:h,catstate:true}});g.preventDefault()})};InboxStateObject.prototype.process=function(){var a=this;var b=$(a).attr("feedid");if(b){$(a.elem).parents(".feedback").fadeOut(350,function(){var f="  <a class='undo' hrefaction='"+a.href+"' href='#' undo-type='"+a.identifier+"'>Undo</a>";var c="  <a class='close-checky' href='#'>Close</a>";var e=a.message+f+c;var g=$("<div/>").addClass(a.identifier).html(e);var d=$(".checky-bar");if(a.state==0){$.ajax({type:"POST",url:a.href,data:{mode:a.mode,feed_ids:[a.feeds],cat_id:a.catid,catstate:a.catstate},success:function(){d.html(g).show()}})}else{$.ajax({type:"POST",url:a.href,data:{mode:"inbox",feed_ids:[a.feeds],cat_id:a.catid},success:function(){d.html("<div class='"+a.identifier+"'>Feedback has been sent to the <a href='"+a.baseUrl+"inbox/all'>Inbox</a> "+f+c+"</div>").show()}})}})}$(document).delegate("a.close-checky","click",function(c){$(this).parents(".check").remove();c.preventDefault()})};function CheckStateObject(a){InboxStateObject.apply(this,arguments);this.elem=a;this.message="Feedback has been published and moved to <a href='"+this.baseUrl+"inbox/published/all'>Published Folder</a>";this.mode="publish";this.feedid=$(a).attr("feedid");this.href=$(a).attr("hrefaction");this.catid=$(a).attr("catid");this.catstate=$(a).attr("cat-state");this.state=$(a).attr("state");this.feeds={feedid:this.feedid};this.identifier=$(a).attr("class")}CheckStateObject.prototype=new InboxStateObject();function FeatureStateObject(a){InboxStateObject.apply(this,arguments);this.elem=a;this.message="Feedback has been published and moved to <a href='"+this.baseUrl+"inbox/featured/all'>Featured Folder</a>";this.mode="feature";this.feedid=$(a).attr("feedid");this.href=$(a).attr("hrefaction");this.catid=$(a).attr("catid");this.catstate=$(a).attr("cat-state");this.state=$(a).attr("state");this.feeds={feedid:this.feedid};this.identifier=$(a).attr("class")}FeatureStateObject.prototype=new InboxStateObject();function RemoveStateObject(a){InboxStateObject.apply(this,arguments);this.elem=a;this.message="Feedback has been <a href='"+this.baseUrl+"inbox/deleted'>deleted</a>";this.mode="delete";this.feedid=$(a).attr("feedid");this.href=$(a).attr("hrefaction");this.catid=$(a).attr("catid");this.catstate=$(a).attr("cat-state");this.state=$(a).attr("state");this.feeds={feedid:this.feedid};this.identifier=$(a).attr("class")}RemoveStateObject.prototype=new InboxStateObject();function CatPickObject(a){InboxStateObject.apply(this,arguments);this.elem=a;this.catstate=$(a).attr("cat-state");if(this.catstate=="default"){this.message="Feedback has been sent to <a href='"+this.baseUrl+"inbox/all'>Inbox</a>"}else{this.message="Feedback has been sent to <a href='"+this.baseUrl+"inbox/filed/all'>Filed Feedback</a>"}this.mode="fileas";$(a).parents("div.category-picker-holder").hide();this.feedid=$(a).attr("feedid");this.href=$(a).attr("hrefaction");this.catid=$(a).attr("catid");this.catstate=$(a).attr("cat-state");this.state=$(a).attr("state");this.feeds={feedid:this.feedid};this.identifier=$(a).attr("class")}CatPickObject.prototype=new InboxStateObject();CatPickObject.prototype.process=function(){var a=this;if(location.pathname.match(/filed|modifyfeedback/)){$.ajax({type:"POST",url:a.href,data:{mode:a.mode,feed_ids:[a.feeds],cat_id:a.catid,catstate:a.catstate},success:function(){if(a.catstate=="default"){$(a.elem).parents(".feedback").fadeOut(350)}var b=new Status();b.notify("Processing...",1000)}})}else{$(this.elem).parents(".feedback").fadeOut(350,function(){var c=" <a class='undo' hrefaction='"+a.href+"' href='#' undo-type='"+a.identifier+"'>Undo</a>";var e="  <a class='close-checky' href='#'>Close</a>";var b=a.message+c+e;var d=$("<div/>").addClass(a.identifier).html(b);var f=$(".checky-bar");if(a.state==0){$.ajax({type:"POST",url:a.href,data:{mode:a.mode,feed_ids:[a.feeds],cat_id:a.catid,catstate:a.catstate},success:function(){var g=new Status();g.notify("Processing...",1000);f.html(d).show()}})}else{$.ajax({type:"POST",url:a.href,data:{mode:"inbox",feed_ids:[a.feeds],cat_id:a.catid},success:function(){var g=new Status();g.notify("Processing...",1000);f.html("<div class='"+a.identifier+"'>Feedback has been sent to the <a href='"+a.baseUrl+"inbox/all'>Inbox</a> "+c+e+"</div>").show()}})}})}$(document).delegate("a.close-checky","click",function(b){$(this).parents(".check").remove();b.preventDefault()})};function InboxStatusChange(a){this.inbox_controls=a}InboxStatusChange.prototype.initialize=function(){var a=this;$(document).delegate(a.inbox_controls,"click",function(h){var d=$(this).attr("class");var g=$(this);var d=$(this).attr("class");var g=$(this);if(d=="check"){var c=new CheckStateObject(g);c.process();c.undo()}if(d=="feature"){var f=new FeatureStateObject(g);f.process();f.undo()}if(d=="remove"||d=="popup-delete"){var b=new RemoveStateObject(g);b.process();b.undo()}})};