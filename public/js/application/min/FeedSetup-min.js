$.fn.selected_theme=function(a){$(this).on("click",function(d){var c=$(this).attr("id");var b=false;$(this).siblings().each(function(){$(this).removeClass("selected-theme")});if(!b){$(this).addClass("selected-theme")}$(a.set_value).val(c)});return this};jQuery(function(a){var k=".preview-display-widget-button, .preview-form-widget-button";a(k).attr("disabled",true).css({opacity:"0.5"});a(document).delegate("#create-widget","submit",function(l){if(a("input[name=theme_name]",this).val()=="Name of your widget"){alert("Please choose a name for your widget")}else{if(!a('input[value="embedded"]').attr("checked")&&!a('input[value="modal"]').attr("checked")){alert("Please choose a widget type")}else{a(this).ajaxSubmit({dataType:"json",beforeSubmit:function(o,n,m){new Status().notify("Processing...",1000)},success:function(p,q,r,n){a("#widget-preview").show();a("input[name=display_widgetkey]").val(p.display.widget.widgetkey);a("input[name=submit_widgetkey]").val(p.submit.widget.widgetkey);var m=a("input[name=display_widgetkey]").val();var o=a("#preview-widget").attr("hrefaction")+"/"+m;a.ajax({url:o,type:"GET",dataType:"json",success:function(s){a("#widget-generate-view").val(s.html_widget_js_code);a("#iframe-generate-view").val(s.html_iframe_code);new ZClip()}});new Status().notify("Success!",1000);a(k).removeAttr("disabled").css({opacity:"1.0"});a(document).delegate(".preview-display-widget-button","click",function(t){var s=a("#preview-widget").attr("hrefaction")+"/"+m;a.ajax({url:s,type:"GET",dataType:"json",success:function(u){s36Lightbox(u.width,u.height,u.html_view)}});t.preventDefault()})}})}}l.preventDefault()});a(document).delegate("#create-form-widget","submit",function(l){a(this).ajaxSubmit({dataType:"json",beforeSubmit:function(o,n,m){new Status().notify("Processing...",1000)},success:function(p,q,r,o){var m=p.submit.widget.widgetkey;var n=a("#formcode-manager-url").attr("hrefaction")+"/"+m;a("#widget-preview").show();new Status().notify("Success!",1000);a.ajax({url:a("#preview-widget").attr("hrefaction")+"/"+m,type:"GET",dataType:"json",success:function(s){window.location=n}})}});l.preventDefault()});a(document).delegate(".preview-form-widget-button, div#preview.button-gray","click",function(o){var n=a("#preview-form-widget-url").attr("hrefaction");var l=a("#selected-form").val();var m=n+"/"+l;a.ajax({url:m,data:{submit_form_text:a("input[name=submit_form_text]").val(),submit_form_question:a("textarea[name=submit_form_question]").val()},dataType:"json",success:function(p){s36Lightbox(p.width,p.height,p.html_view)}});o.preventDefault()});a("#full_page_widget").hide();a("#embed_widget").hide();a("#modal_widget").hide();a("#full_page_type").click(function(){h();a("#embed_widget tr td").children('select, input[type="text"]').val(0).end().children('input[type="radio"]').attr("checked",null);a("#modal_widget tr td").children("select").val(0)});a("#embed_type").click(function(){j();a("#full_page_widget tr td").children("select").val(0);a("#modal_widget tr td").children("select").val(0)});a("#modal_type").click(function(){d();a("#full_page_widget tr td").children("select").val(0);a("#embed_widget tr td").children('select, input[type="text"]').val(0).end().children('input[type="radio"]').attr("checked",null)});if(a('input[value="embedded"]').attr("checked")){j()}if(a('input[value="modal"]').attr("checked")){d()}function h(){a("#full_page_widget").slideDown();a("#embed_widget").slideUp();a("#modal_widget").slideUp()}function j(){a("#full_page_widget").slideUp();a("#embed_widget").slideDown();a("#modal_widget").slideUp()}function d(){a("#full_page_widget").slideUp();a("#embed_widget").slideUp();a("#modal_widget").slideDown()}a("#edit-widget-btn").on("click",function(l){a.scrollTo(".widget-options:first-child",800);l.preventDefault()});var g=a("#overview-target, #display-overview-target, #form-overview-target");g.delegate(".pagination a","click",function(n){var l=a(this).attr("href");var m=a(this);a.ajax({url:l,dataType:"json",beforeSend:function(p){var o=new Status();o.notify("Processing...",1000)},success:function(o){m.parents("span").html(o.view)}});n.stopImmediatePropagation();n.preventDefault()});var f=a(".form-designs").cycle({fx:"scrollHorz",speed:500,timeout:0,pause:1,next:".form-design-next",prev:".form-design-prev"});f.cycle(expose_index("#selected-form"));var b=["r","l","br","bl","tr","tl"];var i="";$tab_slide=[];for(pos=0;pos<=b.length;pos++){i=b[pos];$tab_slide[i]=a("."+i+"-designs").cycle({fx:"scrollHorz",speed:500,timeout:0,pause:1,next:"."+i+"-design-next",prev:"."+i+"-design-prev"})}var c=expose_index("#selected-tab");f.cycle(expose_index("#selected-form"));var e=a("#tab-position").val();$tab_slide[e].cycle(c);a("#tab-slider").children().each(function(){a(this).hide()});a("."+e+"-design-slide").show();a("#tab-position").change(function(){var l=a(this).val();a("#tab-slider").children().each(function(){a(this).hide()});a("."+l+"-design-slide").show()});a(".form-design").selected_theme({set_value:"#selected-form"});a(".tab-design").selected_theme({set_value:"#selected-tab"}).click(function(o){var n=a(this).attr("id");var m=a("input[name=submit_widgetkey]").val();var l=a("#update-tabtype-url").attr("hrefaction")+"/"+m+"/"+n;a.ajax({url:l,beforeSend:function(){new Status().notify("Processing...",1000)},success:function(p){new Status().notify("Success!",1000)}});o.preventDefault()});a(document).delegate(".delete-widget","click",function(n){var l=a(this).attr("href");var m=a(this).parents("div.widget-types");if(confirm("Are you sure you want to delete this widget?")){a.ajax({url:l,success:function(o){m.fadeOut(500,function(){a(this).remove()})}})}n.preventDefault()});a(".large-text, .regular-text").focus(function(l){if(a(this).val()==a(this)[0].title){a(this).removeClass("reg-text-active");a(this).val("")}});a(".large-text, .regular-text").blur(function(){if(a.trim(a(this).val())==""){a(this).val(a(this)[0].title)}});a(".large-textarea, .regular-textarea, .form-text, .large-text").each(function(){a(this).val(a(this)[0].title)})});function expose_index(c){var a=$(c).val();var b=$("#"+a).parent();var d=parseInt(b.index());$("#"+a).addClass("selected-theme");return d}function isDefined(b,a){if(typeof b!="object"||b==null){return false}var d=a.split(".");while(d.length){var c=d.shift();if(!(c in b)){return false}b=b[c]}return true};