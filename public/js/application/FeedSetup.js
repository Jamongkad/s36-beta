$.fn.selected_theme=function(b){$(this).on("click",function(e){var f=$(this).attr("id");var a=false;$(this).siblings().each(function(){$(this).removeClass("selected-theme")});if(!a){$(this).addClass("selected-theme")}$(b.set_value).val(f)});return this};jQuery(function(r){var s=".preview-display-widget-button, .preview-form-widget-button";r(s).attr("disabled",true).css({opacity:"0.5"});r(document).delegate("#create-widget","submit",function(a){if(r("input[name=theme_name]",this).val()=="Name of your widget"){alert("Please choose a name for your widget")}else{if(!r('input[value="embedded"]').attr("checked")&&!r('input[value="modal"]').attr("checked")){alert("Please choose a widget type")}else{r(this).ajaxSubmit({dataType:"json",beforeSubmit:function(c,d,b){new Status().notify("Processing...",1000)},success:function(e,d,c,g){r("#widget-preview").show();r("input[name=display_widgetkey]").val(e.display.widget.widgetkey);r("input[name=submit_widgetkey]").val(e.submit.widget.widgetkey);var b=r("input[name=display_widgetkey]").val();var f=r("#preview-widget").attr("hrefaction")+"/"+b;r.ajax({url:f,type:"GET",dataType:"json",success:function(h){r("#widget-generate-view").val(h.html_widget_js_code);r("#iframe-generate-view").val(h.html_iframe_code);new ZClip()}});new Status().notify("Success!",1000);r(s).removeAttr("disabled").css({opacity:"1.0"});r(document).delegate(".preview-display-widget-button","click",function(h){var i=r("#preview-widget").attr("hrefaction")+"/"+b;r.ajax({url:i,type:"GET",dataType:"json",success:function(j){s36Lightbox(j.width,j.height,j.html_view)}});h.preventDefault()})}})}}a.preventDefault()});r(document).delegate("#create-form-widget","submit",function(a){r(this).ajaxSubmit({dataType:"json",beforeSubmit:function(c,d,b){new Status().notify("Processing...",1000)},success:function(e,d,c,f){var b=e.submit.widget.widgetkey;var g=r("#formcode-manager-url").attr("hrefaction")+"/"+b;r("#widget-preview").show();new Status().notify("Success!",1000);r.ajax({url:r("#preview-widget").attr("hrefaction")+"/"+b,type:"GET",dataType:"json",success:function(h){window.location=g}})}});a.preventDefault()});r(document).delegate(".preview-form-widget-button, div#preview.button-gray","click",function(c){var d=r("#preview-form-widget-url").attr("hrefaction");var b=r("#selected-form").val();var a=d+"/"+b;r.ajax({url:a,data:{submit_form_text:r("input[name=submit_form_text]").val(),submit_form_question:r("textarea[name=submit_form_question]").val()},dataType:"json",success:function(e){s36Lightbox(e.width,e.height,e.html_view)}});c.preventDefault()});r("#full_page_widget").hide();r("#embed_widget").hide();r("#modal_widget").hide();r("#full_page_type").click(function(){v();r("#embed_widget tr td").children('select, input[type="text"]').val(0).end().children('input[type="radio"]').attr("checked",null);r("#modal_widget tr td").children("select").val(0)});r("#embed_type").click(function(){t();r("#full_page_widget tr td").children("select").val(0);r("#modal_widget tr td").children("select").val(0)});r("#modal_type").click(function(){o();r("#full_page_widget tr td").children("select").val(0);r("#embed_widget tr td").children('select, input[type="text"]').val(0).end().children('input[type="radio"]').attr("checked",null)});if(r('input[value="embedded"]').attr("checked")){t()}if(r('input[value="modal"]').attr("checked")){o()}function v(){r("#full_page_widget").slideDown();r("#embed_widget").slideUp();r("#modal_widget").slideUp()}function t(){r("#full_page_widget").slideUp();r("#embed_widget").slideDown();r("#modal_widget").slideUp()}function o(){r("#full_page_widget").slideUp();r("#embed_widget").slideUp();r("#modal_widget").slideDown()}r("#edit-widget-btn").on("click",function(a){r.scrollTo(".widget-options:first-child",800);a.preventDefault()});var l=r("#overview-target, #display-overview-target, #form-overview-target");l.delegate(".pagination a","click",function(c){var b=r(this).attr("href");var a=r(this);r.ajax({url:b,dataType:"json",beforeSend:function(d){var e=new Status();e.notify("Processing...",1000)},success:function(d){a.parents("span").html(d.view)}});c.stopImmediatePropagation();c.preventDefault()});var m=r(".form-designs").cycle({fx:"scrollHorz",speed:500,timeout:0,pause:1,next:".form-design-next",prev:".form-design-prev"});m.cycle(expose_index("#selected-form"));var q=["r","l","br","bl","tr","tl"];var u="";$tab_slide=[];for(pos=0;pos<=q.length;pos++){u=q[pos];$tab_slide[u]=r("."+u+"-designs").cycle({fx:"scrollHorz",speed:500,timeout:0,pause:1,next:"."+u+"-design-next",prev:"."+u+"-design-prev"})}var p=expose_index("#selected-tab");m.cycle(expose_index("#selected-form"));var n=r("#tab-position").val();$tab_slide[n].cycle(p);r("#tab-slider").children().each(function(){r(this).hide()});r("."+n+"-design-slide").show();r("#tab-position").change(function(){var a=r(this).val();r("#tab-slider").children().each(function(){r(this).hide()});r("."+a+"-design-slide").show()});r(".form-design").selected_theme({set_value:"#selected-form"});r(".tab-design").selected_theme({set_value:"#selected-tab"}).click(function(c){var d=r(this).attr("id");var a=r("input[name=submit_widgetkey]").val();var b=r("#update-tabtype-url").attr("hrefaction")+"/"+a+"/"+d;r.ajax({url:b,beforeSend:function(){new Status().notify("Processing...",1000)},success:function(e){new Status().notify("Success!",1000)}});c.preventDefault()});r(document).delegate(".delete-widget","click",function(c){var b=r(this).attr("href");var a=r(this).parents("div.widget-types");if(confirm("Are you sure you want to delete this widget?")){r.ajax({url:b,success:function(d){a.fadeOut(500,function(){r(this).remove()})}})}c.preventDefault()});r(".large-text, .regular-text").focus(function(a){if(r(this).val()==r(this)[0].title){r(this).removeClass("reg-text-active");r(this).val("")}});r(".large-text, .regular-text").blur(function(){if(r.trim(r(this).val())==""){r(this).val(r(this)[0].title)}});r(".large-textarea, .regular-textarea, .form-text, .large-text").each(function(){r(this).val(r(this)[0].title)})});function expose_index(f){var h=$(f).val();var g=$("#"+h).parent();var e=parseInt(g.index());$("#"+h).addClass("selected-theme");return e}function isDefined(g,h){if(typeof g!="object"||g==null){return false}var e=h.split(".");while(e.length){var f=e.shift();if(!(f in g)){return false}g=g[f]}return true};